# ============================================================================
# Environment Configuration Template
# ============================================================================
# This file documents all environment variables required for the security-
# hardened Node.js application. Copy this file to .env and configure values
# appropriate for your environment.
#
# SECURITY WARNING: Never commit your actual .env file to version control!
# ============================================================================

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Application environment mode
# Valid values: development, production, test
# - development: Enables verbose logging, self-signed cert warnings are expected
# - production: Strict security, requires valid TLS certificates
# - test: Used for automated testing
NODE_ENV=development

# HTTP server port (used for HTTP to HTTPS redirect in production)
# In development, this may serve HTTP directly for testing
# Default: 3000
PORT=3000

# HTTPS server port (primary secure server port)
# All production traffic should use this port
# Default: 3443
HTTPS_PORT=3443

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# CORS (Cross-Origin Resource Sharing) allowed origins
# Comma-separated list of origins permitted to make cross-origin requests
# Set to specific domains in production for security
# Leave empty or omit to disable CORS (block all cross-origin requests)
# 
# Examples:
#   Single origin:  ALLOWED_ORIGINS=https://example.com
#   Multiple:       ALLOWED_ORIGINS=https://example.com,https://api.example.com
#   Development:    ALLOWED_ORIGINS=https://localhost:3443,http://localhost:3000
#
# WARNING: Never use '*' in production - always specify explicit origins
ALLOWED_ORIGINS=https://localhost:3443,https://example.com

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================

# Rate limit time window in milliseconds
# This defines the duration of the sliding window for request counting
# Default: 900000 (15 minutes = 15 * 60 * 1000)
#
# Common values:
#   60000    = 1 minute
#   300000   = 5 minutes
#   900000   = 15 minutes (recommended default)
#   3600000  = 1 hour
RATE_LIMIT_WINDOW_MS=900000

# Maximum number of requests allowed per IP within the rate limit window
# Requests exceeding this limit will receive HTTP 429 (Too Many Requests)
# Default: 100
#
# Adjust based on your application's expected traffic patterns:
#   - Public API: 100-1000 requests per window
#   - Authenticated users: May warrant higher limits
#   - Login endpoints: Consider stricter limits (e.g., 5-10)
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# TLS/SSL CONFIGURATION
# ============================================================================

# Path to TLS private key file (PEM format)
# Required for HTTPS server operation
# Generate with: openssl genrsa -out certs/server.key 2048
# 
# SECURITY: 
#   - Keep private key secure with restricted file permissions (chmod 600)
#   - Never commit private keys to version control
#   - Use strong key sizes (minimum 2048-bit RSA or 256-bit ECDSA)
TLS_KEY_PATH=./certs/server.key

# Path to TLS certificate file (PEM format)
# Required for HTTPS server operation
# 
# For development (self-signed):
#   openssl req -new -x509 -key certs/server.key -out certs/server.crt -days 365
#
# For production:
#   Use certificates from a trusted Certificate Authority (CA)
#   such as Let's Encrypt, DigiCert, or your organization's PKI
TLS_CERT_PATH=./certs/server.crt

# ============================================================================
# OPTIONAL: ADVANCED SECURITY SETTINGS
# ============================================================================

# Hostname/IP address to bind the server to
# Default: 0.0.0.0 (all interfaces) for production
# Use 127.0.0.1 for local-only access during development
# HOST=0.0.0.0

# Trust proxy setting for rate limiting behind reverse proxies
# Set to true if behind a trusted reverse proxy (nginx, AWS ELB, etc.)
# This ensures rate limiting uses the correct client IP from X-Forwarded-For
# TRUST_PROXY=false

# ============================================================================
# NOTES FOR DEPLOYMENT
# ============================================================================
# 
# Development Setup:
#   1. Copy this file: cp .env.example .env
#   2. Generate certificates: 
#      mkdir -p certs
#      openssl genrsa -out certs/server.key 2048
#      openssl req -new -x509 -key certs/server.key -out certs/server.crt -days 365
#   3. Start server: npm start
#
# Production Checklist:
#   [ ] Set NODE_ENV=production
#   [ ] Configure valid TLS certificates from a trusted CA
#   [ ] Restrict ALLOWED_ORIGINS to specific domains
#   [ ] Tune rate limiting based on expected traffic
#   [ ] Ensure .env file is not in version control
#   [ ] Set appropriate file permissions on certificates
#   [ ] Consider using environment variables directly instead of .env file
#
# ============================================================================
